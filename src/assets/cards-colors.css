        /* Card Colors - Light Theme (Zotero palette, softened) */
        .light-theme .card-color-1 { background-color: #fff4b8 !important; } /* Gul */
        .light-theme .card-color-2 { background-color: #ffd6d6 !important; } /* Röd */
        .light-theme .card-color-3 { background-color: #d4efc7 !important; } /* Grön */
        .light-theme .card-color-4 { background-color: #cbe9ff !important; } /* Blå */
        .light-theme .card-color-5 { background-color: #e7ddff !important; } /* Lila */
        .light-theme .card-color-6 { background-color: #ffd6ff !important; } /* Magenta */
        .light-theme .card-color-7 { background-color: #ffe3c4 !important; } /* Orange */
        .light-theme .card-color-8 { background-color: #f0f0f0 !important; } /* Grå */

        /* Card Colors - Dark Theme / E-ink (neutralized) */
        .dark-theme .card-color-1,
        .dark-theme .card-color-2,
        .dark-theme .card-color-3,
        .dark-theme .card-color-4,
        .dark-theme .card-color-5,
        .dark-theme .card-color-6,
        .dark-theme .card-color-7,
        .dark-theme .card-color-8,
        .eink-theme .card-color-1,
        .eink-theme .card-color-2,
        .eink-theme .card-color-3,
        .eink-theme .card-color-4,
        .eink-theme .card-color-5,
        .eink-theme .card-color-6,
        .eink-theme .card-color-7,
        .eink-theme .card-color-8 {
            background-color: var(--bg-primary) !important;
        }

        /* Card Colors - Sepia Theme */
        .sepia-theme .card-color-1 { background-color: #f4e6d7 !important; } /* Sepia Red */
        .sepia-theme .card-color-2 { background-color: #e6d7c3 !important; } /* Sepia Blue */
        .sepia-theme .card-color-3 { background-color: #e8e6d7 !important; } /* Sepia Green */
        .sepia-theme .card-color-4 { background-color: #f0e6d2 !important; } /* Sepia Orange */
        .sepia-theme .card-color-5 { background-color: #ede6d7 !important; } /* Sepia Purple */
        
        /* Color Picker Popup */
        .color-picker-popup {
            position: fixed;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 2000;
        }
        
        .dark-theme .color-picker-popup {
            background: #2d2d2d;
            border-color: #555;
            color: #e0e0e0;
        }
        
        .sepia-theme .color-picker-popup {
            background: #e8d7c3;
            border-color: #c8a882;
            color: #5d4e37;
        }
        
        .color-picker-grid {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 10px 0;
        }
        
        .color-picker-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #333;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: #333;
        }
        
        .color-picker-dot:hover {
            transform: scale(1.1);
        }
        
        /* Dark theme adjustments for dot text */
        .dark-theme .color-picker-dot {
            color: #fff !important;
            border-color: #666;
        }
        
        /* Sepia theme adjustments for dot text */
        .sepia-theme .color-picker-dot {
            color: #5d4e37 !important;
            border-color: #8B7355;
        }
        
        /* Ensure numbers are visible with stronger contrast */
        .color-picker-dot {
            text-shadow: 0 0 3px rgba(0,0,0,0.7);
        }
        
        .dark-theme .color-picker-dot {
            text-shadow: 0 0 3px rgba(0,0,0,0.9);
        }
        
        /* Color picker dot colors - Light theme */
        .color-picker-dot.card-color-1 { background-color: #fff4b8; } /* Gul */
        .color-picker-dot.card-color-2 { background-color: #ffd6d6; } /* Röd */
        .color-picker-dot.card-color-3 { background-color: #d4efc7; } /* Grön */
        .color-picker-dot.card-color-4 { background-color: #cbe9ff; } /* Blå */
        .color-picker-dot.card-color-5 { background-color: #e7ddff; } /* Lila */
        .color-picker-dot.card-color-6 { background-color: #ffd6ff; } /* Magenta */
        .color-picker-dot.card-color-7 { background-color: #ffe3c4; } /* Orange */
        .color-picker-dot.card-color-8 { background-color: #f0f0f0; } /* Grå */

        /* Dark theme color picker dots (neutral) */
        .dark-theme .color-picker-dot.card-color-1,
        .dark-theme .color-picker-dot.card-color-2,
        .dark-theme .color-picker-dot.card-color-3,
        .dark-theme .color-picker-dot.card-color-4,
        .dark-theme .color-picker-dot.card-color-5,
        .dark-theme .color-picker-dot.card-color-6,
        .dark-theme .color-picker-dot.card-color-7,
        .dark-theme .color-picker-dot.card-color-8,
        .eink-theme .color-picker-dot.card-color-1,
        .eink-theme .color-picker-dot.card-color-2,
        .eink-theme .color-picker-dot.card-color-3,
        .eink-theme .color-picker-dot.card-color-4,
        .eink-theme .color-picker-dot.card-color-5,
        .eink-theme .color-picker-dot.card-color-6,
        .eink-theme .color-picker-dot.card-color-7,
        .eink-theme .color-picker-dot.card-color-8 { background-color: var(--bg-secondary); }
        
        /* Sepia theme color picker dots */
        .sepia-theme .color-picker-dot.card-color-1 { background-color: #ded6c7; } /* Sepia Grön */
        .sepia-theme .color-picker-dot.card-color-2 { background-color: #e6d6c2; } /* Sepia Orange */
        .sepia-theme .color-picker-dot.card-color-3 { background-color: #ead6c7; } /* Sepia Röd */
        .sepia-theme .color-picker-dot.card-color-4 { background-color: #ebe2d6; } /* Sepia Gul */
        .sepia-theme .color-picker-dot.card-color-5 { background-color: #e2d6c7; } /* Sepia Lila */
        .sepia-theme .color-picker-dot.card-color-6 { background-color: #d6c7b3; } /* Sepia Blå */
        .sepia-theme .color-picker-dot.card-color-7 { background-color: #c0b8a8; } /* Sepia Grå */
        .sepia-theme .color-picker-dot.card-color-8 { background-color: #f5f2e8; } /* Sepia Vit */
        
        .color-picker-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .color-picker-cancel {
            text-align: center;
            margin-top: 10px;
            padding: 5px 10px;
            background: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .dark-theme .color-picker-cancel {
            background: #555;
            color: #e0e0e0;
        }
        
        .sepia-theme .color-picker-cancel {
            background: #d7c8a8;
            color: #5d4e37;
        }
        
        .color-picker-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .color-picker-grid {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .color-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #ddd;
            transition: transform 0.2s, border-color 0.2s;
        }
        
        .color-dot:hover {
            transform: scale(1.1);
            border-color: #333;
        }
        
        .dark-theme .color-dot {
            border-color: #555;
        }
        
        .dark-theme .color-dot:hover {
            border-color: #bbb;
        }
        
        .sepia-theme .color-dot {
            border-color: #c8a882;
        }
        
        .sepia-theme .color-dot:hover {
            border-color: #8b7556;
        }
        
        .color-picker-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
        }
        
        .color-picker-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .color-picker-btn.remove {
            background: #ff6b6b;
            color: white;
        }
        
        .color-picker-btn.cancel {
            background: #6c757d;
            color: white;
        }
        
